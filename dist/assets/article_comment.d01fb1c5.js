import{d as E,a as R,b as k,r as i,o as _,e as p,f as s,w as n,h as o,t as l,u as D,i as d,k as c,j as V,M as m}from"./index.2bfdadc6.js";import{c as A}from"./comment_api.b396a17b.js";import{a as U}from"./date.a44b248f.js";import{F as L}from"./f_a.85908447.js";import{_ as I,a as N}from"./options.9d69dd6c.js";import{_ as T}from"./comment_list.vue_vue_type_style_index_0_lang.85100f63.js";import"./_plugin-vue_export-helper.cdc0426e.js";const $={class:"article_comment_view"},z={class:"user"},K={class:"info"},M={class:"nickname"},S={class:"nick"},j={key:0},H={key:1,class:"article"},O={class:"content"},q={class:"data"},G={class:"date"},J={class:"digg"},P={key:0,class:"cover"},Q=["src"],ne=E({__name:"article_comment",setup(W){const a=R({articleID:0,parentID:0,content:""}),f=k();async function v(r){if(a.articleID=r.articleID,a.parentID=r.id,a.content.trim()===""){m.warning("\u8BF7\u8F93\u5165\u56DE\u590D\u5185\u5BB9");return}const t=await A(a);if(t.code){m.error(t.msg);return}m.success(t.msg),a.content="",r.visible=!1,f.value.getData()}const g=k();function h(){var r;(r=g.value)==null||r.focus()}function w(){}return(r,t)=>{const B=i("a-avatar"),C=i("router-link"),y=i("a-typography-text"),x=i("a-button"),F=i("a-textarea"),b=i("a-trigger");return _(),p("div",$,[s(T,{ref_key:"commentListRef",ref:f,type:1},{default:n(({item:e})=>[o("div",z,[s(B,{"image-url":e.userAvatarURL},null,8,["image-url"])]),o("div",K,[o("div",M,[o("span",S,l(e.userNickname),1),e.isMe?d("",!0):(_(),p("span",j,[s(I,{options:D(N),value:e.relation},null,8,["options","value"])])),e.articleCoverURL?d("",!0):(_(),p("span",H,[t[1]||(t[1]=c(" \u8BC4\u8BBA\u4E86\u6587\u7AE0\uFF1A ")),s(C,{to:""},{default:n(()=>[c(l(e.articleTitle),1)]),_:2},1024)]))]),o("div",O,[s(y,{ellipsis:{rows:2,css:!0}},{default:n(()=>[c(l(e.content),1)]),_:2},1024)]),o("div",q,[o("span",G,l(D(U)(e.createdAt)),1),o("span",J,[t[2]||(t[2]=o("i",{title:"\u70B9\u8D5E",class:"iconfont icon-dianzanliang"},null,-1)),o("span",null,l(e.likeCount),1)]),s(b,{"popup-visible":e.visible,"onUpdate:popupVisible":u=>e.visible=u,onShow:h,onHide:w,trigger:"click","content-class":"apply_comment_trigger","unmount-on-close":!1},{content:n(()=>[s(x,{type:"primary",size:"mini",onClick:u=>v(e)},{default:n(()=>t[4]||(t[4]=[c("\u56DE\u590D")])),_:2,__:[4]},1032,["onClick"]),s(F,{ref_key:"textareaRef",ref:g,"auto-size":{minRows:3},placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u7684\u5185\u5BB9",onKeydown:V(u=>v(e),["enter"]),modelValue:a.content,"onUpdate:modelValue":t[0]||(t[0]=u=>a.content=u)},null,8,["onKeydown","modelValue"])]),default:n(()=>[s(L,{class:"apply"},{default:n(()=>t[3]||(t[3]=[c("\u56DE\u590D")])),_:1,__:[3]})]),_:2},1032,["popup-visible","onUpdate:popupVisible"])])]),e.articleCoverURL?(_(),p("div",P,[o("img",{src:e.articleCoverURL,alt:""},null,8,Q),o("span",null,[s(y,{ellipsis:{rows:1,css:!0}},{default:n(()=>[c("\u6587\u7AE0\uFF1A"+l(e.articleTitle),1)]),_:2},1024)])])):d("",!0)]),_:1},512)])}}});export{ne as default};
