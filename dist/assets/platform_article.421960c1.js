import{d as z,a as D,r as i,o as n,e as d,h as e,f as o,w as a,j as I,n as C,F as w,g as F,i as f,M as h,k as l,u as g,t as p,c as y,a3 as R,a4 as T,a5 as j,m as K,a6 as O}from"./index.540d1321.js";import{F as B}from"./f_a.317cc10b.js";import{e as q,f as G}from"./article_api.adc2a192.js";import{d as H}from"./date.d29fe5d3.js";import{a as b}from"./go_router.eb15e96d.js";import"./_plugin-vue_export-helper.cdc0426e.js";const J={class:"platform_article_view"},P={class:"head"},Q={class:"left"},W={class:"right"},X={class:"body scrollbar"},Y={class:"menu"},Z={class:"article_list"},tt={class:"item"},st={class:"cover"},et=["onClick","src"],ot={class:"info"},at={class:"title_row"},nt={key:0,class:"user_top"},lt=["onClick"],rt={class:"more"},ut={class:"abs"},it={class:"data"},dt={class:"look"},_t={class:"comment"},ct={class:"tags"},pt={class:"date"},mt={key:0,class:"page"},vt={key:1,class:"no_data"},wt=z({__name:"platform_article",setup(ft){const m=D({list:[],count:0}),r=D({type:2,status:3,limit:10});async function v(){const u=await q(r);if(u.code){h.error(u.msg);return}Object.assign(m,u.data)}function E(u){r.status=u,v()}async function x(u,t){if(t==="platformArticleEdit"){K.push({name:t,params:{id:u}});return}let _={code:0,msg:"",data:""};if(t==="delete"?_=await G(u):_=await O(u),_.code){h.error(_.msg);return}h.success(_.msg),v()}return v(),(u,t)=>{const _=i("a-button"),U=i("router-link"),V=i("a-input-search"),A=i("a-tag"),k=i("a-doption"),S=i("a-dropdown"),$=i("a-typography-text"),L=i("a-overflow-list"),M=i("a-pagination"),N=i("a-empty");return n(),d("div",J,[e("div",P,[e("div",Q,[t[6]||(t[6]=e("div",{class:"title"},"\u6211\u7684\u6587\u7AE0",-1)),o(U,{to:{name:"platformArticleAdd"}},{default:a(()=>[o(_,{type:"primary"},{default:a(()=>t[5]||(t[5]=[l("\u53D1\u5E03\u6587\u7AE0")])),_:1,__:[5]})]),_:1})]),e("div",W,[o(V,{onSearch:v,onKeydown:I(v,["enter"]),modelValue:r.key,"onUpdate:modelValue":t[0]||(t[0]=s=>r.key=s),placeholder:"\u641C\u7D22\u6587\u7AE0"},null,8,["modelValue"])])]),e("div",X,[e("div",Y,[o(B,{class:C({active:r.status===3}),onClick:t[1]||(t[1]=s=>E(3))},{default:a(()=>t[7]||(t[7]=[l("\u5DF2\u53D1\u5E03")])),_:1,__:[7]},8,["class"]),o(B,{class:C({active:r.status===2}),onClick:t[2]||(t[2]=s=>E(2))},{default:a(()=>t[8]||(t[8]=[l("\u5BA1\u6838\u4E2D")])),_:1,__:[8]},8,["class"]),o(B,{class:C({active:r.status===1}),onClick:t[3]||(t[3]=s=>E(1))},{default:a(()=>t[9]||(t[9]=[l("\u8349\u7A3F\u7BB1")])),_:1,__:[9]},8,["class"])]),e("div",Z,[(n(!0),d(w,null,F(m.list,s=>(n(),d("div",tt,[e("div",st,[s.coverURL?(n(),d("img",{key:0,onClick:c=>g(b)(s.id),src:s.coverURL,alt:""},null,8,et)):f("",!0)]),e("div",ot,[e("div",at,[s.pinnedByUser?(n(),d("div",nt,[o(A,{color:"blue"},{default:a(()=>t[10]||(t[10]=[l("\u7F6E\u9876")])),_:1,__:[10]})])):f("",!0),e("div",{class:"title",onClick:c=>g(b)(s.id)},p(s.title),9,lt),e("div",rt,[o(S,{onSelect:c=>x(s.id,c)},{content:a(()=>[s.pinnedByUser?(n(),y(k,{key:0,value:"cancelTop"},{default:a(()=>t[11]||(t[11]=[l("\u53D6\u6D88\u7F6E\u9876")])),_:1,__:[11]})):f("",!0),!s.pinnedByUser&&s.status===3?(n(),y(k,{key:1,value:"top"},{default:a(()=>t[12]||(t[12]=[l("\u7F6E\u9876\u6587\u7AE0")])),_:1,__:[12]})):f("",!0),o(k,{value:"platformArticleEdit"},{default:a(()=>t[13]||(t[13]=[l("\u7F16\u8F91\u6587\u7AE0")])),_:1,__:[13]}),o(k,{value:"delete",style:{color:"red"}},{default:a(()=>t[14]||(t[14]=[l("\u5220\u9664\u6587\u7AE0")])),_:1,__:[14]})]),default:a(()=>[o(g(R))]),_:2},1032,["onSelect"])])]),e("div",ut,[o($,{ellipsis:{rows:2,css:!0}},{default:a(()=>[l(p(s.abstract),1)]),_:2},1024)]),e("div",it,[e("div",dt,[o(g(T)),e("span",null,p(s.readCount),1)]),e("div",_t,[o(g(j)),e("span",null,p(s.commentCount),1)]),e("div",ct,[s.tags.length<=3?(n(!0),d(w,{key:0},F(s.tags,c=>(n(),y(A,{class:"tag"},{default:a(()=>[l(p(c),1)]),_:2},1024))),256)):(n(),y(L,{key:1,min:5},{default:a(()=>[(n(!0),d(w,null,F(s.tags,c=>(n(),y(A,null,{default:a(()=>[l(p(c),1)]),_:2},1024))),256))]),_:2},1024))]),e("div",pt,"\u6700\u540E\u66F4\u65B0\u4E8E "+p(g(H)(s.updatedAt)),1)])])]))),256)),m.count?(n(),d("div",mt,[o(M,{onChange:v,current:r.page,"onUpdate:current":t[4]||(t[4]=s=>r.page=s),"page-size":r.limit,total:m.count,"show-total":""},null,8,["current","page-size","total"])])):f("",!0),!m.list||m.list.length===0?(n(),d("div",vt,[o(N)])):f("",!0)])])])}}});export{wt as default};
