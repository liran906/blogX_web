import{d as B,l as F,a as M,b as D,r as v,o as c,e as p,f as r,w as n,i as $,c as k,h as l,F as V,g as E,M as m,k as C,n as S,u as y,t as g,m as U}from"./index.540d1321.js";import{u as z}from"./user_base_store.cbc0b599.js";import{_ as O}from"./f_article_list.vue_vue_type_style_index_0_lang.8927dc34.js";import{F as A}from"./f_a.317cc10b.js";import{_ as T,c as j,a as G,b as H}from"./f_collect_form_modal.vue_vue_type_script_setup_true_lang.6ddde645.js";import"./article_api.adc2a192.js";import"./go_router.eb15e96d.js";import"./date.d29fe5d3.js";import"./_plugin-vue_export-helper.cdc0426e.js";const J={class:"f_category_list_com"},K={key:0,class:"add"},P={class:"list"},Q=["onClick"],W=["onClick"],X=B({__name:"f_collect_list",props:{userId:{},isMe:{type:Boolean}},setup(h){const i=F(),u=h,_=M({list:[],count:0});async function d(){const s=await j({userID:u.userId});if(s.code){m.error(s.msg);return}_.list=s.data.list,_.count=s.data.count}const e=M({id:0,title:"",abstract:""}),a=D(!1);function I(){e.id=0,e.title="",e.abstract="",a.value=!0}function N(s){e.id=s.id,e.title=s.title,e.abstract=s.abstract,a.value=!0}D();async function R(s){const o=await G([s.id]);if(o.code){m.error(o.msg);return}m.success(o.msg),d()}function x(s){const o=Number(i.query.collectID);let f=s.id;o===s.id&&(f=void 0),U.push({name:i.name,query:{...i.query,collectID:f},params:i.params})}return d(),(s,o)=>{const f=v("icon-plus"),q=v("a-button"),w=v("a-typography-text"),L=v("a-trigger");return c(),p("div",J,[u.isMe?(c(),p("div",K,[r(q,{long:"",type:"outline",onClick:I},{icon:n(()=>[r(f)]),default:n(()=>[o[3]||(o[3]=C(" \u521B\u5EFA "))]),_:1,__:[3]})])):$("",!0),u.isMe?(c(),k(T,{key:1,onOk:d,id:e.id,title:e.title,"onUpdate:title":o[0]||(o[0]=t=>e.title=t),abstract:e.abstract,"onUpdate:abstract":o[1]||(o[1]=t=>e.abstract=t),visible:a.value,"onUpdate:visible":o[2]||(o[2]=t=>a.value=t)},null,8,["id","title","abstract","visible"])):$("",!0),l("div",P,[(c(!0),p(V,null,E(_.list,t=>(c(),p("div",{class:S(["item",{active:t.id===Number(y(i).query.collectID)}])},[u.isMe?(c(),k(L,{key:0,"content-class":"category_trigger",trigger:"contextMenu","align-point":""},{content:n(()=>[l("div",{class:"item",onClick:b=>N(t)},"\u7F16\u8F91",8,Q),l("div",{class:"item delete",onClick:b=>R(t)},"\u5220\u9664",8,W)]),default:n(()=>[r(A,{onClick:b=>x(t)},{default:n(()=>[l("span",null,[r(w,{ellipsis:{css:!0,rows:1}},{default:n(()=>[C(g(t.title),1)]),_:2},1024)]),l("span",null,g(t.articleCount),1)]),_:2},1032,["onClick"])]),_:2},1024)):(c(),k(A,{key:1,onClick:b=>x(t)},{default:n(()=>[l("span",null,[r(w,{ellipsis:{css:!0,rows:1}},{default:n(()=>[C(g(t.title),1)]),_:2},1024)]),l("span",null,g(t.articleCount),1)]),_:2},1032,["onClick"]))],2))),256))])])}}});const Y={class:"user_article_list_view"},lt=B({__name:"collect_list",setup(h){const i=z(),u=F(),_=D();async function d(e){const a=await H(e);if(a.code){m.error(a.msg);return}m.success(a.msg),_.value.getData()}return(e,a)=>(c(),p("div",Y,[r(X,{"user-id":Number(y(u).params.id),"is-me":y(i).isMe},null,8,["user-id","is-me"]),r(O,{ref_key:"fArticleListRef",ref:_,onDispatchDelete:d,"is-check":y(i).isMe},null,8,["is-check"])]))}});export{lt as default};
