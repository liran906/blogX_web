import{d as x,a as y,r as m,o as i,e as r,f as p,w as l,M as v,F as k,g as w,c as A,h as c,u as C,i as D,t as g,a2 as B,k as b}from"./index.540d1321.js";import{_ as M}from"./f_card.vue_vue_type_style_index_0_lang.5321710d.js";/* empty css                                               */import{c as N,d as V}from"./article_api.adc2a192.js";import{b as z,t as H}from"./date.d29fe5d3.js";import{a as R}from"./go_router.eb15e96d.js";const U={class:"user_center_history_view"},$={class:"article_list"},I=["onClick"],O={class:"cover"},T=["src"],E={class:"info"},S={class:"title"},j={class:"time"},q={class:"action"},G={key:0,class:"page"},Z=x({__name:"history",setup(J){const o=y({list:[],count:0}),_=y({type:1,limit:10});async function f(){const a=await N(_);if(a.code){v.error(a.msg);return}o.count=a.data.count,o.list=[];const t={};for(const e of a.data.list){const s=z(e.createdAt);t[s]?t[s].push(e):t[s]=[e]}for(const e in t){const s=t[e];o.list.push({date:e,articleList:s})}o.list.sort((e,s)=>{const d=new Date(e.date).valueOf();return new Date(s.date).valueOf()-d})}async function F(a){const t=await V([a.historyID]);if(t.code){v.error(t.msg);return}v.success(t.msg),f()}return f(),(a,t)=>{const e=m("a-button"),s=m("a-timeline-item"),d=m("a-timeline"),h=m("a-pagination");return i(),r("div",U,[p(M,{title:"\u8DB3\u8FF9"},{default:l(()=>[p(d,null,{default:l(()=>[(i(!0),r(k,null,w(o.list,u=>(i(),A(s,{lineType:"dashed"},{label:l(()=>[c("div",$,[(i(!0),r(k,null,w(u.articleList,n=>(i(),r("div",{class:"item",onClick:L=>C(R)(n.articleID)},[c("div",O,[n.coverURL?(i(),r("img",{key:0,src:n.coverURL,alt:""},null,8,T)):D("",!0)]),c("div",E,[c("div",S,g(n.title),1),c("div",j,g(C(H)(n.createdAt)),1)]),c("div",q,[p(e,{type:"primary",onClick:B(L=>F(n),["stop"]),status:"danger",size:"mini"},{default:l(()=>t[1]||(t[1]=[b("\u5220\u9664")])),_:2,__:[1]},1032,["onClick"])])],8,I))),256))])]),default:l(()=>[b(g(u.date)+" ",1)]),_:2},1024))),256))]),_:1}),o.count>0?(i(),r("div",G,[p(h,{onChange:f,current:_.page,"onUpdate:current":t[0]||(t[0]=u=>_.page=u),"page-size":_.limit,total:o.count,"show-total":""},null,8,["current","page-size","total"])])):D("",!0)]),_:1})])}}});export{Z as default};
