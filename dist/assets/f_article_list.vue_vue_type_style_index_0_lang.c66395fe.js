import{l as G,e as J}from"./article_api.458fd84d.js";import{a as N}from"./go_router.30e3be2a.js";import{d as K}from"./date.a44b248f.js";import{d as O,b as w,l as P,a as x,H as F,r as l,o as s,e as n,h as o,c as k,w as _,i as d,f as r,M as Q,k as v,F as C,g as D,u as I,t as p}from"./index.2bfdadc6.js";const W={class:"f_article_list_parent_com"},X={key:0,class:"actions"},Y={class:"f_article_list_com"},Z={class:"item"},ee={key:0,class:"check"},te={class:"cover"},se=["onClick","src"],oe={class:"info"},ae={class:"title_row"},ce={key:0,class:"user_top"},ne=["onClick"],le={class:"abs"},ie={class:"data"},re={class:"look"},ue={class:"comment"},_e={class:"tags"},de={class:"date"},pe={key:0,class:"page"},me={key:1,class:"no_data"},ke=O({__name:"f_article_list",props:{isCheck:{type:Boolean}},emits:["dispatchDelete"],setup(B,{expose:E,emit:V}){const h=w(!1),b=B,L=V,m=w([]),i=P(),u=x({list:[],count:0}),e=x({type:1,userID:Number(i.params.id)});async function g(){let a;if(e.collectID){const c={collectionID:e.collectID,...e.page&&{page:e.page},...e.limit&&{limit:e.limit},...e.key&&{key:e.key},...e.categoryID&&{categoryID:e.categoryID}};a=await G(c)}else a=await J(e);if(a.code){Q.error(a.msg);return}u.list=a.data.list,u.count=a.data.count}g(),F(()=>i.query,()=>{const a=Number(i.query.categoryID);isNaN(a)?e.categoryID=void 0:e.categoryID=a;const c=Number(i.query.collectID);isNaN(c)?e.collectID=void 0:e.collectID=c,i.query.key!==void 0&&(e.key=i.query.key),g()},{deep:!0}),F(()=>i.params.id,()=>{const a=Number(i.params.id);isNaN(a)||(e.userID=a,g())});function q(){h.value=!h.value}async function A(){L("dispatchDelete",m.value),m.value=[]}return E({getData:g}),(a,c)=>{const U=l("a-button"),M=l("a-checkbox"),f=l("a-tag"),z=l("a-typography-text"),R=l("IconEye"),H=l("IconMessage"),S=l("a-overflow-list"),$=l("a-checkbox-group"),T=l("a-pagination"),j=l("a-empty");return s(),n("div",W,[b.isCheck?(s(),n("div",X,[o("span",{class:"dispatch_span",onClick:q},"\u6279\u91CF\u64CD\u4F5C"),m.value.length&&h.value?(s(),k(U,{key:0,size:"mini",onClick:A,status:"danger"},{default:_(()=>c[2]||(c[2]=[v("\u6279\u91CF\u79FB\u9664 ")])),_:1,__:[2]})):d("",!0)])):d("",!0),o("div",Y,[r($,{style:{width:"100%"},modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=t=>m.value=t)},{default:_(()=>[(s(!0),n(C,null,D(u.list,t=>(s(),n("div",Z,[b.isCheck&&h.value?(s(),n("div",ee,[r(M,{value:t.id},null,8,["value"])])):d("",!0),o("div",te,[t.coverURL?(s(),n("img",{key:0,onClick:y=>I(N)(t.id),src:t.coverURL,alt:""},null,8,se)):d("",!0)]),o("div",oe,[o("div",ae,[t.pinnedByUser?(s(),n("div",ce,[r(f,{color:"blue"},{default:_(()=>c[3]||(c[3]=[v("\u7F6E\u9876")])),_:1,__:[3]})])):d("",!0),o("div",{class:"title",onClick:y=>I(N)(t.id)},p(t.title),9,ne)]),o("div",le,[r(z,{ellipsis:{rows:2,css:!0}},{default:_(()=>[v(p(t.abstract),1)]),_:2},1024)]),o("div",ie,[o("div",re,[r(R),o("span",null,p(t.readCount),1)]),o("div",ue,[r(H),o("span",null,p(t.commentCount),1)]),o("div",_e,[t.tags.length<=3?(s(!0),n(C,{key:0},D(t.tags,y=>(s(),k(f,{class:"tag"},{default:_(()=>[v(p(y),1)]),_:2},1024))),256)):(s(),k(S,{key:1,min:5},{default:_(()=>[(s(!0),n(C,null,D(t.tags,y=>(s(),k(f,null,{default:_(()=>[v(p(y),1)]),_:2},1024))),256))]),_:2},1024))]),o("div",de,"\u6700\u540E\u66F4\u65B0\u4E8E"+p(I(K)(t.updatedAt)),1)])])]))),256))]),_:1},8,["modelValue"]),u.count?(s(),n("div",pe,[r(T,{onChange:g,current:e.page,"onUpdate:current":c[1]||(c[1]=t=>e.page=t),"page-size":e.limit,total:u.count,"show-total":""},null,8,["current","page-size","total"])])):d("",!0),!u.list||u.list.length===0?(s(),n("div",me,[r(j)])):d("",!0)])])}}});export{ke as _};
