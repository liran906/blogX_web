import{b as z,c as F,f as L,a as $}from"./focus_api.e91578e9.js";import{d as M,l as V,p as q,a as A,H as E,r as c,o,e as u,h as r,F as R,g as S,f as l,i as k,M as f,w as _,k as p,t as v,u as h,c as C,s as H}from"./index.540d1321.js";import{a as O,_ as T}from"./options.b139b46d.js";import{g as B}from"./go_router.eb15e96d.js";const j={class:"f_focus_list_com"},G={class:"user_list"},J={class:"item"},K={class:"info"},P={class:"nick"},Q=["onClick"],W={class:"abs"},X={class:"action"},Y={key:0,class:"no_data"},Z={key:1,class:"page"},as=M({__name:"f_focus_list",props:{userId:{},type:{}},setup(N){const g=V(),m=N,w=q(),i=A({list:[],count:0}),a=A({userID:m.userId,isMe:!1,limit:10,page:1});async function d(){a.isMe=w.userInfo.userID==m.userId;let e;if(m.type==="focus"?e=await z(a):e=await F(a),e.code){f.error(e.msg);return}i.list=e.data.list,i.count=e.data.count}async function I(e,t){if(!w.isLogin){f.warning("\u8BF7\u767B\u5F55"),H({reload:!0});return}let n;if(t?n=await L({focusUserID:e}):n=await $({focusUserID:e}),n.code){f.error(n.msg);return}f.success(n.msg),d()}return d(),E(()=>g.query.key,()=>{g.query.key!==void 0&&(a.key=g.query.key,d())}),(e,t)=>{const n=c("a-avatar"),D=c("a-typography-text"),x=c("a-button"),U=c("a-empty"),b=c("a-pagination");return o(),u("div",j,[r("div",G,[(o(!0),u(R,null,S(i.list,s=>(o(),u("div",J,[l(n,{onClick:y=>h(B)(s.userID),size:60,"image-url":s.userAvatar},{default:_(()=>[p(v(s.userNickname[0]),1)]),_:2},1032,["onClick","image-url"]),r("div",K,[r("div",P,[r("span",{onClick:y=>h(B)(s.userID),class:"nickname"},[l(D,{ellipsis:{rows:1,css:!0}},{default:_(()=>[p(v(s.userNickname),1)]),_:2},1024)],8,Q),s.relationship!==1&&s.relationship!==0?(o(),C(T,{key:0,options:h(O),value:s.relationship},null,8,["options","value"])):k("",!0)]),r("div",W,[l(D,{ellipsis:{rows:1,css:!0}},{default:_(()=>[p(v(s.userAbstract),1)]),_:2},1024)]),r("div",X,[s.relationship===2||s.relationship===4?(o(),C(x,{key:0,type:"primary",size:"mini",onClick:y=>I(s.userID,!1)},{default:_(()=>t[1]||(t[1]=[p("\u5DF2\u5173\u6CE8 ")])),_:2,__:[1]},1032,["onClick"])):(o(),C(x,{key:1,type:"outline",size:"mini",onClick:y=>I(s.userID,!0)},{default:_(()=>t[2]||(t[2]=[p("\u5173\u6CE8")])),_:2,__:[2]},1032,["onClick"]))])])]))),256))]),i.list.length===0?(o(),u("div",Y,[l(U)])):k("",!0),i.list.length?(o(),u("div",Z,[l(b,{"page-size":a.limit,current:a.page,"onUpdate:current":t[0]||(t[0]=s=>a.page=s),total:i.count,"show-total":"",onChange:d},null,8,["page-size","current","total"])])):k("",!0)])}}});export{as as _};
