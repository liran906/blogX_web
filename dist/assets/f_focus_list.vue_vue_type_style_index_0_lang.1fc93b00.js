import{b as $,c as b,f as z,a as F}from"./focus_api.6f6b55a7.js";import{d as L,l as M,p as V,a as x,J as q,r as d,o as a,e as c,h as r,F as E,g as R,f as u,i as y,M as f,w as l,k as _,t as v,u as h,c as C,s as S}from"./index.59b2a34b.js";import{a as J,_ as O}from"./options.5861b7d6.js";import{g as N}from"./go_router.f3d891cc.js";import{_ as T}from"./f_avatar.vue_vue_type_script_setup_true_lang.52cebde0.js";/* empty css                                                 */const j={class:"f_focus_list_com"},G={class:"user_list"},H={class:"item"},K={class:"info"},P={class:"nick"},Q=["onClick"],W={class:"abs"},X={class:"action"},Y={key:0,class:"no_data"},Z={key:1,class:"page"},is=L({__name:"f_focus_list",props:{userId:{},type:{}},setup(A){const m=M(),g=A,w=V(),i=x({list:[],count:0}),n=x({userID:g.userId,isMe:!1,limit:10,page:1});async function p(){n.isMe=w.userInfo.userID==g.userId;let e;if(g.type==="focus"?e=await $(n):e=await b(n),e.code){f.error(e.msg);return}i.list=e.data.list,i.count=e.data.count}async function I(e,t){if(!w.isLogin){f.warning("\u8BF7\u767B\u5F55"),S({reload:!0});return}let o;if(t?o=await z({focusUserID:e}):o=await F({focusUserID:e}),o.code){f.error(o.msg);return}f.success(o.msg),p()}return p(),q(()=>m.query.key,()=>{m.query.key!==void 0&&(n.key=m.query.key,p())}),(e,t)=>{const o=d("a-typography-text"),D=d("a-button"),B=d("a-empty"),U=d("a-pagination");return a(),c("div",j,[r("div",G,[(a(!0),c(E,null,R(i.list,s=>(a(),c("div",H,[u(T,{onClick:k=>h(N)(s.userID),size:60,"image-url":s.userAvatar,nickname:s.userNickname},{default:l(()=>[_(v(s.userNickname[0]),1)]),_:2},1032,["onClick","image-url","nickname"]),r("div",K,[r("div",P,[r("span",{onClick:k=>h(N)(s.userID),class:"nickname"},[u(o,{ellipsis:{rows:1,css:!0}},{default:l(()=>[_(v(s.userNickname),1)]),_:2},1024)],8,Q),s.relationship!==1&&s.relationship!==0?(a(),C(O,{key:0,options:h(J),value:s.relationship},null,8,["options","value"])):y("",!0)]),r("div",W,[u(o,{ellipsis:{rows:1,css:!0}},{default:l(()=>[_(v(s.userAbstract),1)]),_:2},1024)]),r("div",X,[s.relationship===2||s.relationship===4?(a(),C(D,{key:0,type:"primary",size:"mini",onClick:k=>I(s.userID,!1)},{default:l(()=>t[1]||(t[1]=[_("\u5DF2\u5173\u6CE8 ")])),_:2,__:[1]},1032,["onClick"])):(a(),C(D,{key:1,type:"outline",size:"mini",onClick:k=>I(s.userID,!0)},{default:l(()=>t[2]||(t[2]=[_("\u5173\u6CE8")])),_:2,__:[2]},1032,["onClick"]))])])]))),256))]),i.list.length===0?(a(),c("div",Y,[u(B)])):y("",!0),i.list.length?(a(),c("div",Z,[u(U,{"page-size":n.limit,current:n.page,"onUpdate:current":t[0]||(t[0]=s=>n.page=s),total:i.count,"show-total":"",onChange:p},null,8,["page-size","current","total"])])):y("",!0)])}}});export{is as _};
