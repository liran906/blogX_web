import{d as f,p as g,o as v,c as h,w as _,x as w,u as E,M as u,al as b}from"./index.540d1321.js";import{I as x,i as C}from"./image_api.661e8412.js";function k(i,a){var e=document.createElement("script"),s=document.getElementsByTagName("head")[0];e.type="text/javascript",e.charset="UTF-8",e.src=i,e.addEventListener?e.addEventListener("load",function(){a()},!1):e.attachEvent&&e.attachEvent("onreadystatechange",function(){var c=window.event.srcElement;c.readyState=="loaded"&&a()}),s.appendChild(e)}const q=f({__name:"f_cover_cutter",props:{rate:{default:"16:9"}},emits:["ok"],setup(i,{emit:a}){const e=g(),s=a,c=i;async function l(o){if(!e.siteInfo.cloud.enable){const r=await C(o.file);if(r.code){u.error(r.msg);return}u.success(r.msg),s("ok",r.data);return}const t=await b();if(t.code){u.error(t.msg);return}k("/js/qiniu.min.js",()=>{d(o.file,t.data)})}function d(o,t){const r={next(n){console.log("next:",n)},error(n){console.log("error:",n)},complete(n){console.log("complete:",n),s("ok",t.url)}},p={useCdnDomain:!0,region:t.region},m={};qiniu.upload(o,t.key,t.token,m,p).subscribe(r)}return(o,t)=>(v(),h(E(x),{onCutDown:l,rate:c.rate},{open:_(()=>[w(o.$slots,"default")]),_:3},8,["rate"]))}});export{q as _};
