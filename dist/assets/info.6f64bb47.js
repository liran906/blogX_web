import{d as w,b as C,H as S,r as f,o as p,e as E,n as $,t as D,F as R,c as F,f as n,u as s,J as T,k as y,i as U,y as O,w as i,M as x,x as z,g as J,j as L,p as A,h as o,K,L as M}from"./index.2bfdadc6.js";import{u as j}from"./user_center_store.ec9ce00b.js";import{a as G}from"./date.a44b248f.js";import{_ as H,r as q}from"./options.9d69dd6c.js";import{i as P,I as Q}from"./image_api.6f95464e.js";import"./_plugin-vue_export-helper.cdc0426e.js";const W={class:"f_edit_input_com"},V=w({__name:"f_edit_input",props:{value:{},type:{},placeholder:{},noEdit:{type:Boolean}},emits:["ok"],setup(B,{emit:t}){const a=B,v=t,u=C(!1),l=C();function r(){u.value=!0,O(()=>{l.value.focus()})}function e(){u.value=!1}function g(_){v("ok",_)}const d=C("");return S(()=>a.value,()=>{d.value=a.value},{immediate:!0}),(_,c)=>{const k=f("a-textarea"),m=f("a-input");return p(),E("div",W,[u.value?(p(),E(R,{key:1},[a.type==="textarea"?(p(),F(k,{key:0,onChange:g,onBlur:e,ref_key:"inputRef",ref:l,"auto-size":{minRows:3,maxRows:4},modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=b=>d.value=b),placeholder:a.placeholder},null,8,["modelValue","placeholder"])):(p(),F(m,{key:1,onChange:g,onBlur:e,ref_key:"inputRef",ref:l,modelValue:d.value,"onUpdate:modelValue":c[1]||(c[1]=b=>d.value=b),placeholder:a.placeholder},null,8,["modelValue","placeholder"]))],64)):(p(),E("span",{key:0,class:$(a.type)},D(a.value),3)),a.noEdit?U("",!0):(p(),E("a",{key:2,class:"edit",onClick:r,href:"javascript:void 0"},[n(s(T)),c[2]||(c[2]=y(" \u7F16\u8F91"))]))])}}});const X=w({__name:"f_avatar_cutter",emits:["ok"],setup(B,{emit:t}){const a=t;async function v(u){const l=await P(u.file);if(l.code){x.error(l.msg);return}x.success(l.msg),a("ok",l.data)}return(u,l)=>(p(),F(s(Q),{onCutDown:v,rate:"1:1"},{open:i(()=>[z(u.$slots,"default")]),_:3}))}}),Y=w({__name:"f_tags_input",props:{value:{}},emits:["ok"],setup(B,{emit:t}){const a=B,v=t,u=C([]);S(()=>a.value,()=>{a.value&&(u.value=JSON.parse(JSON.stringify(a.value)))},{immediate:!0});const l=C(null),r=C(!1),e=C(""),g=()=>{r.value=!0,O(()=>{var c;l.value&&((c=l.value)==null||c.focus())})},d=()=>{e.value&&(u.value.push(e.value),e.value="",v("ok",u.value)),r.value=!1},_=c=>{u.value=u.value.filter(k=>k!==c),v("ok",u.value)};return(c,k)=>{const m=f("a-tag"),b=f("a-input"),I=f("icon-plus"),N=f("a-space");return p(),F(N,{wrap:""},{default:i(()=>[(p(!0),E(R,null,J(u.value,(h,_e)=>(p(),F(m,{key:h,closable:"",onClose:ce=>_(h)},{default:i(()=>[y(D(h),1)]),_:2},1032,["onClose"]))),128)),r.value?(p(),F(b,{key:0,ref_key:"inputRef",ref:l,style:{width:"90px"},size:"mini",modelValue:e.value,"onUpdate:modelValue":k[0]||(k[0]=h=>e.value=h),modelModifiers:{trim:!0},onKeyup:L(d,["enter"]),onBlur:d},null,8,["modelValue"])):(p(),F(m,{key:1,style:{width:"90px",backgroundColor:"var(--color-fill-2)",border:"1px dashed var(--color-fill-3)",cursor:"pointer"},onClick:g},{icon:i(()=>[n(I)]),default:i(()=>[k[1]||(k[1]=y(" Add Tag "))]),_:1,__:[1]}))]),_:1})}}}),Z={class:"user_center_info_view"},ee={class:"top"},te={class:"avatar"},ae={class:"avatar_inner"},se={class:"camera_bg",title:"\u5934\u50CF\u4E0A\u4F20"},ue={class:"info"},oe={class:"title"},ne={class:"code_age"},le={class:"base_info"},ie={class:"body"},re={class:"tags"},de={class:"body"},ye=w({__name:"info",setup(B){A();const t=j();async function a(r,e){const g={};e=e,g[r]=e;const d=await K(g);if(d.code){x.error(d.msg);return}x.success(d.msg),await t.getUserDetail();const _=A();_.userInfo.token&&await _.saveUserInfo(_.userInfo.token)}const v=C([]);function u(r){v.value=r}function l(r){JSON.stringify(r)!==JSON.stringify(v.value)&&a("tags",v.value)}return(r,e)=>{const g=f("a-avatar"),d=f("a-tag"),_=f("a-form-item"),c=f("a-form"),k=f("a-button");return p(),E("div",Z,[o("div",ee,[o("div",te,[o("div",ae,[s(t).userDetail.registerSource!==2?(p(),F(X,{key:0,onOk:e[0]||(e[0]=m=>a("avatarURL",m))},{default:i(()=>[o("div",se,[n(s(M))])]),_:1})):U("",!0),n(g,{"image-url":s(t).userDetail.avatarURL,size:60},null,8,["image-url"])])]),o("div",ue,[o("div",oe,D(s(t).userDetail.nickname),1),o("div",ne,[n(d,null,{default:i(()=>[y("\u7AD9\u9F84"+D(s(t).userDetail.siteAge)+"\u5E74",1)]),_:1})])])]),o("div",le,[e[5]||(e[5]=o("div",{class:"head"},"\u57FA\u672C\u4FE1\u606F",-1)),o("div",ie,[n(c,{model:s(t).userDetail,"label-col-props":{span:2},"label-align":"left","wrapper-col-props":{span:22}},{default:i(()=>[n(_,{label:"\u7528\u6237\u6635\u79F0"},{help:i(()=>e[4]||(e[4]=[y("\u6635\u79F030\u5929\u5185\u53EF\u4FEE\u6539\u4E00\u6B21")])),default:i(()=>[n(V,{placeholder:"\u7528\u6237\u6635\u79F0","no-edit":s(t).userDetail.registerSource===2,onOk:e[1]||(e[1]=m=>a("nickname",m)),value:s(t).userDetail.nickname},null,8,["no-edit","value"])]),_:1}),n(_,{label:"\u7528\u6237\u540D"},{default:i(()=>[y(D(s(t).userDetail.username),1)]),_:1}),n(_,{label:"\u7B80\u4ECB"},{default:i(()=>[n(V,{placeholder:"\u7528\u6237\u7B80\u4ECB",type:"textarea",onOk:e[2]||(e[2]=m=>a("bio",m)),value:s(t).userDetail.bio},null,8,["value"])]),_:1}),n(_,{label:"\u6CE8\u518C\u65F6\u95F4"},{default:i(()=>[y(D(s(G)(s(t).userDetail.createdAt)),1)]),_:1}),n(_,{label:"\u6CE8\u518C\u6765\u6E90"},{default:i(()=>[n(H,{options:s(q),value:s(t).userDetail.registerSource},null,8,["options","value"])]),_:1})]),_:1},8,["model"])])]),o("div",re,[e[7]||(e[7]=o("div",{class:"head"},[o("div",{class:"title"},"\u5174\u8DA3\u6807\u7B7E"),o("div",{class:"abs"},"\u8BF7\u60A8\u9009\u62E9\u611F\u5174\u8DA3\u7684\u6280\u672F\u9886\u57DF\uFF0CGenerationBlog \u4F1A\u6839\u636E\u60A8\u7684\u6807\u7B7E\u5E2E\u60A8\u627E\u5230 \u66F4\u9002\u5408\u60A8\u7684\u5185\u5BB9")],-1)),o("div",de,[o("div",null,[n(Y,{value:s(t).userDetail.tags,onOk:u},null,8,["value"])]),o("div",null,[n(k,{type:"primary",onClick:e[3]||(e[3]=m=>l(s(t).userDetail.tags)),size:"mini"},{default:i(()=>e[6]||(e[6]=[y("\u66F4\u65B0")])),_:1,__:[6]})])])])])}}});export{ye as default};
