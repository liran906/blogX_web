import{d as b,a as E,b as D,r as u,o as _,e as p,f as s,w as n,h as o,u as d,t as l,i as m,k as c,j as R,M as f}from"./index.59b2a34b.js";import{c as V}from"./comment_api.0e74aa09.js";import{a as A}from"./date.33211258.js";import{F as U}from"./f_a.60334d10.js";import{_ as I,a as L}from"./options.5861b7d6.js";import{_ as N}from"./comment_list.vue_vue_type_style_index_0_lang.f743bcb7.js";import{g as $}from"./go_router.f3d891cc.js";import{_ as T}from"./f_avatar.vue_vue_type_script_setup_true_lang.52cebde0.js";/* empty css                                                 */import"./_plugin-vue_export-helper.cdc0426e.js";const z={class:"article_comment_view"},K={class:"user"},M={class:"info"},S={class:"nickname"},j={class:"nick"},H={key:0},O={key:1,class:"article"},q={class:"content"},G={class:"data"},J={class:"date"},P={class:"digg"},Q={key:0,class:"cover"},W=["src"],le=b({__name:"article_comment",setup(X){const a=E({articleID:0,parentID:0,content:""}),v=D();async function g(r){if(a.articleID=r.articleID,a.parentID=r.id,a.content.trim()===""){f.warning("\u8BF7\u8F93\u5165\u56DE\u590D\u5185\u5BB9");return}const t=await V(a);if(t.code){f.error(t.msg);return}f.success(t.msg),a.content="",r.visible=!1,v.value.getData()}const k=D();function C(){var r;(r=k.value)==null||r.focus()}function h(){}return(r,t)=>{const w=u("router-link"),y=u("a-typography-text"),B=u("a-button"),x=u("a-textarea"),F=u("a-trigger");return _(),p("div",z,[s(N,{ref_key:"commentListRef",ref:v,type:1},{default:n(({item:e})=>[o("div",K,[s(T,{onClick:i=>d($)(e.userID),"image-url":e.userAvatarURL,nickname:e.userNickname},null,8,["onClick","image-url","nickname"])]),o("div",M,[o("div",S,[o("span",j,l(e.userNickname),1),e.isMe?m("",!0):(_(),p("span",H,[s(I,{options:d(L),value:e.relation},null,8,["options","value"])])),e.articleCoverURL?m("",!0):(_(),p("span",O,[t[1]||(t[1]=c(" \u8BC4\u8BBA\u4E86\u6587\u7AE0\uFF1A ")),s(w,{to:""},{default:n(()=>[c(l(e.articleTitle),1)]),_:2},1024)]))]),o("div",q,[s(y,{ellipsis:{rows:2,css:!0}},{default:n(()=>[c(l(e.content),1)]),_:2},1024)]),o("div",G,[o("span",J,l(d(A)(e.createdAt)),1),o("span",P,[t[2]||(t[2]=o("i",{title:"\u70B9\u8D5E",class:"iconfont icon-dianzanliang"},null,-1)),o("span",null,l(e.likeCount),1)]),s(F,{"popup-visible":e.visible,"onUpdate:popupVisible":i=>e.visible=i,onShow:C,onHide:h,trigger:"click","content-class":"apply_comment_trigger","unmount-on-close":!1},{content:n(()=>[s(B,{type:"primary",size:"mini",onClick:i=>g(e)},{default:n(()=>t[4]||(t[4]=[c("\u56DE\u590D")])),_:2,__:[4]},1032,["onClick"]),s(x,{ref_key:"textareaRef",ref:k,"auto-size":{minRows:3},placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u7684\u5185\u5BB9",onKeydown:R(i=>g(e),["enter"]),modelValue:a.content,"onUpdate:modelValue":t[0]||(t[0]=i=>a.content=i)},null,8,["onKeydown","modelValue"])]),default:n(()=>[s(U,{class:"apply"},{default:n(()=>t[3]||(t[3]=[c("\u56DE\u590D")])),_:1,__:[3]})]),_:2},1032,["popup-visible","onUpdate:popupVisible"])])]),e.articleCoverURL?(_(),p("div",Q,[o("img",{src:e.articleCoverURL,alt:""},null,8,W),o("span",null,[s(y,{ellipsis:{rows:1,css:!0}},{default:n(()=>[c("\u6587\u7AE0\uFF1A"+l(e.articleTitle),1)]),_:2},1024)])])):m("",!0)]),_:1},512)])}}});export{le as default};
