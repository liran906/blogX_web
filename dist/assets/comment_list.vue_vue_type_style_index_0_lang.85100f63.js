import{a as q,b as z}from"./comment_api.b396a17b.js";import"./date.a44b248f.js";import{d as U,l as E,a as k,b as _,H as F,r as i,o as c,e as m,h as v,f as u,w as d,c as M,i as h,M as g,k as x,F as R,g as D,x as H}from"./index.2bfdadc6.js";const I={class:"comment_list_com"},P={class:"actions"},S={class:"comment_list"},T={class:"item"},$={class:"check"},j={key:0,class:"page"},Q=U({__name:"comment_list",props:{type:{}},setup(V,{expose:C}){const p=E(),o=k({list:[],count:0}),n=k({type:V.type,limit:10}),s=_([]),r=_(!1);async function l(){r.value=!0,o.list=[];const t=await q(n);if(t.code){g.error(t.msg),r.value=!1;return}o.count=t.data.count,o.list=t.data.list,r.value=!1}l();async function b(){(await Promise.all(s.value.map(e=>z(e)))).forEach(e=>{if(e.code){g.error(e.msg);return}g.success(e.msg)}),s.value=[],l()}async function w(t){if(t){s.value=o.list.map(e=>e.id);return}s.value=[]}const f=_(!1);return F(()=>p.query.key,()=>{p.query.key&&(n.key=p.query.key,l())}),C({getData:l}),(t,e)=>{const y=i("a-checkbox"),L=i("a-button"),A=i("a-checkbox-group"),B=i("a-spin"),N=i("a-pagination");return c(),m("div",I,[v("div",P,[u(y,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),onChange:w},{default:d(()=>e[3]||(e[3]=[x("\u5168\u9009")])),_:1,__:[3]},8,["modelValue"]),s.value.length?(c(),M(L,{key:0,onClick:b,type:"primary",status:"danger",size:"mini"},{default:d(()=>e[4]||(e[4]=[x("\u5220\u9664 ")])),_:1,__:[4]})):h("",!0)]),v("div",S,[u(B,{style:{width:"100%"},loading:r.value},{default:d(()=>[u(A,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a)},{default:d(()=>[(c(!0),m(R,null,D(o.list,a=>(c(),m("div",T,[v("div",$,[u(y,{value:a.id},null,8,["value"])]),H(t.$slots,"default",{item:a})]))),256))]),_:3},8,["modelValue"])]),_:3},8,["loading"]),o.list&&o.list.length?(c(),m("div",j,[u(N,{total:o.count,"show-total":"",current:n.page,"onUpdate:current":e[2]||(e[2]=a=>n.page=a),"page-size":n.limit,onChange:l},null,8,["total","current","page-size"])])):h("",!0)])])}}});export{Q as _};
